<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="multilevelcoda">
<!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light">
<script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/5/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Multilevel Models with Compositional Predictors • multilevelcoda</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multilevel Models with Compositional Predictors">
<meta property="og:description" content="multilevelcoda">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/5/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/5/darkly/bootstrap.css" media="(prefers-color-scheme: dark)">
<!-- preferably CSS --><link rel="stylesheet" href="../preferably.css">
<link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">multilevelcoda</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">Introduction to Compositional Multilevel Modelling</a>
    <a class="dropdown-item" href="../articles/comp-outcome.html">Multilevel Model with Compositional Outcomes</a>
    <a class="dropdown-item" href="../articles/comp-predictor.html">Multilevel Models with Compositional Predictors</a>
    <a class="dropdown-item" href="../articles/substitution-model.html">Compositional Multilevel Substitution Models</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/florale/multilevelcoda/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>

        
        
        
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Multilevel Models with Compositional Predictors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/florale/multilevelcoda/blob/HEAD/vignettes/comp-predictor.Rmd" class="external-link"><code>vignettes/comp-predictor.Rmd</code></a></small>
      <div class="d-none name"><code>comp-predictor.Rmd</code></div>
    </div>

    
    
<p>In this vignette, we discuss how to use <code>multilevelcoda</code>
to specify multilevel models where compositional data are used as
predictors.</p>
<p>The following table outlines the packages used and a brief
description of their purpose.</p>
<table class="table">
<colgroup>
<col width="17%">
<col width="82%">
</colgroup>
<thead><tr class="header">
<th align="center">Package</th>
<th align="center">Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center"><code>multilevelcoda</code></td>
<td align="center">calculate between and within composition variables,
calculate substitutions and plots</td>
</tr>
<tr class="even">
<td align="center"><code>brms</code></td>
<td align="center">fit Bayesian multilevel models using Stan as a
backend</td>
</tr>
<tr class="odd">
<td align="center"><code>bayestestR</code></td>
<td align="center">compute Bayes factors used to compare models</td>
</tr>
<tr class="even">
<td align="center"><code>doFuture</code></td>
<td align="center">parallel processing to speed up run times</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://florale.github.io/multilevelcoda/">multilevelcoda</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/paul-buerkner/brms" class="external-link">brms</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: Rcpp</span></span>
<span><span class="co">#&gt; Loading 'brms' package (version 2.19.0). Useful instructions</span></span>
<span><span class="co">#&gt; can be found by typing help('brms'). A more detailed introduction</span></span>
<span><span class="co">#&gt; to the package is available through vignette('brms_overview').</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'brms'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     ar</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/bayestestR/" class="external-link">bayestestR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://doFuture.futureverse.org" class="external-link">doFuture</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: foreach</span></span>
<span><span class="co">#&gt; Loading required package: future</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="co"># reduce number of digits shown</span></span></code></pre></div>
<p>For the examples, we make use of three built in datasets:</p>
<table class="table">
<colgroup>
<col width="9%">
<col width="90%">
</colgroup>
<thead><tr class="header">
<th align="center">Dataset</th>
<th align="center">Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center"><code>mcompd</code></td>
<td align="center">compositional sleep and wake variables and additional
predictors/outcomes (simulated)</td>
</tr>
<tr class="even">
<td align="center"><code>sbp</code></td>
<td align="center">a pre-specified sequential binary partition, used in
calculating compositional predictors</td>
</tr>
<tr class="odd">
<td align="center"><code>psub</code></td>
<td align="center">all possible pairwise substitutions between
compositional variables, used for substitution analyses</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"mcompd"</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sbp"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"psub"</span><span class="op">)</span></span></code></pre></div>
<p>The following table shows a few rows of data from
<code>mcompd</code>.</p>
<table class="table">
<thead><tr class="header">
<th align="right">TST</th>
<th align="right">WAKE</th>
<th align="right">MVPA</th>
<th align="right">LPA</th>
<th align="right">SB</th>
<th align="right">ID</th>
<th align="right">Age</th>
<th align="right">Female</th>
<th align="right">STRESS</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">542</td>
<td align="right">99.0</td>
<td align="right">297.4</td>
<td align="right">460</td>
<td align="right">41.4</td>
<td align="right">185</td>
<td align="right">29.7</td>
<td align="right">0</td>
<td align="right">3.67</td>
</tr>
<tr class="even">
<td align="right">458</td>
<td align="right">49.4</td>
<td align="right">117.3</td>
<td align="right">653</td>
<td align="right">162.3</td>
<td align="right">185</td>
<td align="right">29.7</td>
<td align="right">0</td>
<td align="right">7.21</td>
</tr>
<tr class="odd">
<td align="right">271</td>
<td align="right">41.1</td>
<td align="right">488.7</td>
<td align="right">625</td>
<td align="right">14.5</td>
<td align="right">185</td>
<td align="right">29.7</td>
<td align="right">0</td>
<td align="right">2.84</td>
</tr>
<tr class="even">
<td align="right">286</td>
<td align="right">52.7</td>
<td align="right">106.9</td>
<td align="right">906</td>
<td align="right">89.2</td>
<td align="right">184</td>
<td align="right">22.3</td>
<td align="right">1</td>
<td align="right">2.36</td>
</tr>
<tr class="odd">
<td align="right">281</td>
<td align="right">18.8</td>
<td align="right">403.0</td>
<td align="right">611</td>
<td align="right">126.3</td>
<td align="right">184</td>
<td align="right">22.3</td>
<td align="right">1</td>
<td align="right">1.18</td>
</tr>
<tr class="even">
<td align="right">397</td>
<td align="right">26.5</td>
<td align="right">39.9</td>
<td align="right">587</td>
<td align="right">389.8</td>
<td align="right">184</td>
<td align="right">22.3</td>
<td align="right">1</td>
<td align="right">0.00</td>
</tr>
</tbody>
</table>
<p>The following table shows the sequential binary partition being used
in <code>sbp</code>. Columns correspond to the composition variables
(TST, WAKE, MVPA, LPA, SB). Rows correspond to distinct ILR
coordinates.</p>
<table class="table">
<thead><tr class="header">
<th align="right">TST</th>
<th align="right">WAKE</th>
<th align="right">MVPA</th>
<th align="right">LPA</th>
<th align="right">SB</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">-1</td>
<td align="right">-1</td>
<td align="right">-1</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">-1</td>
<td align="right">-1</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">-1</td>
</tr>
</tbody>
</table>
<p>The following table shows how all the possible binary substitutions
contrasts are setup. Time substitutions work by taking time from the -1
variable and adding time to the +1 variable.</p>
<table class="table">
<thead><tr class="header">
<th align="right">TST</th>
<th align="right">WAKE</th>
<th align="right">MVPA</th>
<th align="right">LPA</th>
<th align="right">SB</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">0</td>
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">-1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">-1</td>
</tr>
<tr class="odd">
<td align="right">-1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="right">1</td>
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">-1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">-1</td>
</tr>
<tr class="odd">
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="right">-1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">-1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">-1</td>
</tr>
<tr class="odd">
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="right">0</td>
<td align="right">-1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">-1</td>
</tr>
<tr class="odd">
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="right">0</td>
<td align="right">-1</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">-1</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<div class="section level2">
<h2 id="multilevel-model-with-compositional-predictors">Multilevel model with compositional predictors<a class="anchor" aria-label="anchor" href="#multilevel-model-with-compositional-predictors"></a>
</h2>
<div class="section level3">
<h3 id="compositions-and-isometric-log-ratio-ilr-coordinates-">Compositions and isometric log ratio (ILR) coordinates.<a class="anchor" aria-label="anchor" href="#compositions-and-isometric-log-ratio-ilr-coordinates-"></a>
</h3>
<p>Compositional data are often expressed as a set of isometric log
ratio (ILR) coordinates in regression models. We can use the
<code><a href="../reference/compilr.html">compilr()</a></code> function to calculate both between- and
within-level ILR coordinates for use in subsequent models as
predictors.</p>
<p><em>Notes: <code><a href="../reference/compilr.html">compilr()</a></code> also calculates total ILR
coordinates to be used as outcomes (or predictors) in models, if the
decomposition into a between- and within-level ILR coordinates was not
desired.</em></p>
<p>The <code><a href="../reference/compilr.html">compilr()</a></code> function for multilevel data requires four
arguments:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="89%">
</colgroup>
<thead><tr class="header">
<th>Argument</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>data</code></td>
<td>A long data set containing all variables needed to fit the
multilevel models,</td>
</tr>
<tr class="even">
<td></td>
<td>including the repeated measure compositional predictors and
outcomes, along with any additional covariates.</td>
</tr>
<tr class="odd">
<td><code>sbp</code></td>
<td>A Sequential Binary Partition to calculate <span class="math inline">\(ilr\)</span> coordinates.</td>
</tr>
<tr class="even">
<td><code>parts</code></td>
<td>The name of the compositional components in <code>data</code>.</td>
</tr>
<tr class="odd">
<td><code>idvar</code></td>
<td>The grouping factor on <code>data</code> to compute the
between-person and within-person composition and <span class="math inline">\(ilr\)</span> coordinates.</td>
</tr>
<tr class="even">
<td><code>total</code></td>
<td>Optional argument to specify the amount to which the compositions
should be closed.</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cilr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compilr.html">compilr</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mcompd</span>, sbp <span class="op">=</span> <span class="va">sbp</span>,</span>
<span>                parts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TST"</span>, <span class="st">"WAKE"</span>, <span class="st">"MVPA"</span>, <span class="st">"LPA"</span>, <span class="st">"SB"</span><span class="op">)</span>, idvar <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="fitting-model">Fitting model<a class="anchor" aria-label="anchor" href="#fitting-model"></a>
</h3>
<p>We now will use output from the <code><a href="../reference/compilr.html">compilr()</a></code> to fit our
<code>brms</code> model, using the <code><a href="../reference/brmcoda.html">brmcoda()</a></code>. Here is a
model predicting <code>STRESS</code> from between- and within-person
sleep-wake behaviours (expressed as ILR coordinates).</p>
<p><em>Notes: make sure you pass the correct names of the ILR
coordinates to <code>brms</code> model.</em></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/brmcoda.html">brmcoda</a></span><span class="op">(</span>compilr <span class="op">=</span> <span class="va">cilr</span>,</span>
<span>             formula <span class="op">=</span> <span class="va">STRESS</span> <span class="op">~</span> <span class="va">bilr1</span> <span class="op">+</span> <span class="va">bilr2</span> <span class="op">+</span> <span class="va">bilr3</span> <span class="op">+</span> <span class="va">bilr4</span> <span class="op">+</span></span>
<span>               <span class="va">wilr1</span> <span class="op">+</span> <span class="va">wilr2</span> <span class="op">+</span> <span class="va">wilr3</span> <span class="op">+</span> <span class="va">wilr4</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">ID</span><span class="op">)</span>,</span>
<span>             cores <span class="op">=</span> <span class="fl">8</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in unserialize(socklist[[n]]): error reading from connection</span></span></code></pre></div>
<p>Here is a <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> of the model results.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">m</span><span class="op">$</span><span class="va">Model</span><span class="op">)</span></span>
<span><span class="co">#&gt;  Family: gaussian </span></span>
<span><span class="co">#&gt;   Links: mu = identity; sigma = identity </span></span>
<span><span class="co">#&gt; Formula: STRESS ~ bilr1 + bilr2 + bilr3 + bilr4 + wilr1 + wilr2 + wilr3 + wilr4 + Female + (1 | ID) </span></span>
<span><span class="co">#&gt;    Data: tmp (Number of observations: 3540) </span></span>
<span><span class="co">#&gt;   Draws: 4 chains, each with iter = 2000; warmup = 1000; thin = 1;</span></span>
<span><span class="co">#&gt;          total post-warmup draws = 4000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group-Level Effects: </span></span>
<span><span class="co">#&gt; ~ID (Number of levels: 266) </span></span>
<span><span class="co">#&gt;               Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS</span></span>
<span><span class="co">#&gt; sd(Intercept)     0.99      0.06     0.87     1.11 1.00     1179     2176</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Population-Level Effects: </span></span>
<span><span class="co">#&gt;           Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS</span></span>
<span><span class="co">#&gt; Intercept     2.64      0.47     1.68     3.57 1.00     1429     2263</span></span>
<span><span class="co">#&gt; bilr1         0.12      0.33    -0.54     0.77 1.00      971     1409</span></span>
<span><span class="co">#&gt; bilr2         0.53      0.35    -0.16     1.21 1.00     1124     1679</span></span>
<span><span class="co">#&gt; bilr3         0.13      0.21    -0.29     0.55 1.00     1052     1809</span></span>
<span><span class="co">#&gt; bilr4        -0.01      0.29    -0.57     0.55 1.00     1021     1941</span></span>
<span><span class="co">#&gt; wilr1        -0.34      0.12    -0.58    -0.10 1.00     2990     3206</span></span>
<span><span class="co">#&gt; wilr2         0.05      0.13    -0.21     0.31 1.00     3396     3077</span></span>
<span><span class="co">#&gt; wilr3        -0.10      0.08    -0.25     0.04 1.00     2900     3218</span></span>
<span><span class="co">#&gt; wilr4         0.23      0.10     0.04     0.43 1.00     2894     3220</span></span>
<span><span class="co">#&gt; Female       -0.39      0.17    -0.74    -0.08 1.00     1405     1697</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Family Specific Parameters: </span></span>
<span><span class="co">#&gt;       Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS</span></span>
<span><span class="co">#&gt; sigma     2.37      0.03     2.31     2.43 1.00     4462     2814</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Draws were sampled using sample(hmc). For each parameter, Bulk_ESS</span></span>
<span><span class="co">#&gt; and Tail_ESS are effective sample size measures, and Rhat is the potential</span></span>
<span><span class="co">#&gt; scale reduction factor on split chains (at convergence, Rhat = 1).</span></span></code></pre></div>
<p>Results show that the first and forth within-person ILR coordinate
was associated with stress. The interpretation of these outputs depends
on how you construct your sequential binary partition. For the built-in
sequential binary partition <code>sbp</code> (shown previously), the
resulting interpretation would be as follows:</p>
<table class="table">
<colgroup>
<col width="11%">
<col width="88%">
</colgroup>
<thead><tr class="header">
<th>ILR</th>
<th>Interpretation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>bilr1</code></td>
<td>Between-person sleep (<code>TST</code> &amp; <code>WAKE</code>) vs
wake (<code>MVPA</code>, <code>LPA</code>, &amp; <code>SB</code>)
behaviours</td>
</tr>
<tr class="even">
<td><code>bilr2</code></td>
<td>Between-person <code>TST</code> vs <code>WAKE</code>
</td>
</tr>
<tr class="odd">
<td><code>bilr3</code></td>
<td>Between-person <code>MVPA</code> vs (<code>LPA</code> and
<code>SB</code>)</td>
</tr>
<tr class="even">
<td><code>bilr4</code></td>
<td>Between-person <code>LPA</code> vs <code>SB</code>
</td>
</tr>
<tr class="odd">
<td><code>wilr1</code></td>
<td>Within-person <code>Sleep</code> (<code>TST</code> &amp;
<code>WAKE</code>) vs wake (<code>MVPA</code>, <code>LPA</code>, &amp;
<code>SB</code>) behaviours</td>
</tr>
<tr class="even">
<td><code>wilr2</code></td>
<td>Within-person <code>TST</code> vs <code>WAKE</code>
</td>
</tr>
<tr class="odd">
<td><code>wilr3</code></td>
<td>Within-person <code>MVPA</code> vs (<code>LPA</code> and
<code>SB</code>)</td>
</tr>
<tr class="even">
<td><code>wilr4</code></td>
<td>Within-person <code>LPA</code> vs <code>SB</code>
</td>
</tr>
</tbody>
</table>
<p>Due to the nature of within-person ILR coordinates, it is often
challenging to interpret these results in great details. For example,
the significant coefficient for <code>wilr1</code> shows that the
within-person change in sleep behaviours (sleep duration and time awake
in bed combined), relative to wake behaviours (moderate to vigorous
physical activity, light physical activity, and sedentary behaviour) on
a given day, was associated with stress. However, as there are several
behaviours involved in this coordinate, we don’t know the within-person
change in which of them drives the association. It could be the change
in sleep, such that people sleep more than their own average on a given
day, but it could also be the change in time awake. Further, we don’t
know about the specific changes in time spent across behaviours. That
is, if people slept more, what behaviour did they spend less time
in?</p>
<p>One approach to gain further insights into these relationships, and
the changes in outcomes associated with changes in specific time across
compositionl components is the substitution model. We will discuss the
substitution model later in this vignette.</p>
</div>
<div class="section level3">
<h3 id="bayes-factor-for-significance-testing">Bayes Factor for significance testing<a class="anchor" aria-label="anchor" href="#bayes-factor-for-significance-testing"></a>
</h3>
<p>In the frequentist approach, we usually compare the fits of models
using <code><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova()</a></code>. In Bayesian, this can be done by comparing
the marginal likelihoods of two models. Bayes Factors (BFs) are indices
of relative evidence of one model over another. In the context of
compositional multilevel modelling, Bayes Factors provide two main
useful functions:</p>
<ul>
<li>Testing single parameters within a model</li>
<li>Comparing models</li>
</ul>
<p>We may utilize Bayes factors to answer the following question:
<em>“Which model (i.e., set of ILR predictors) is more likely to have
produced the observed data?”</em></p>
<p>Let’s fit a series of model with <code><a href="../reference/brmcoda.html">brmcoda()</a></code> to predict
<code>STRESS</code> from sleep-wake composition. For precise Bayes
factors, we will use 40,000 posterior draws for each model.</p>
<p><em>Notes</em> : To use Bayes factors, <code>brmsfit</code> models
must be fitted with an additional non-default argument
<code>save_pars = save_pars(all = TRUE)</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># intercept only model</span></span>
<span><span class="va">m0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/brmcoda.html">brmcoda</a></span><span class="op">(</span>compilr <span class="op">=</span> <span class="va">cilr</span>,</span>
<span>             formula <span class="op">=</span> <span class="va">STRESS</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">ID</span><span class="op">)</span>,</span>
<span>             iter <span class="op">=</span> <span class="fl">6000</span>, chains <span class="op">=</span> <span class="fl">8</span>, cores <span class="op">=</span> <span class="fl">8</span>, seed <span class="op">=</span> <span class="fl">123</span>, warmup <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>             save_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/brms/man/save_pars.html" class="external-link">save_pars</a></span><span class="op">(</span>all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in unserialize(socklist[[n]]): error reading from connection</span></span>
<span></span>
<span><span class="co"># between-person composition only model</span></span>
<span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/brmcoda.html">brmcoda</a></span><span class="op">(</span>compilr <span class="op">=</span> <span class="va">cilr</span>,</span>
<span>             formula <span class="op">=</span> <span class="va">STRESS</span> <span class="op">~</span> <span class="va">bilr1</span> <span class="op">+</span> <span class="va">bilr2</span> <span class="op">+</span> <span class="va">bilr3</span> <span class="op">+</span> <span class="va">bilr4</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">ID</span><span class="op">)</span>,</span>
<span>             iter <span class="op">=</span> <span class="fl">6000</span>, chains <span class="op">=</span> <span class="fl">8</span>, cores <span class="op">=</span> <span class="fl">8</span>, seed <span class="op">=</span> <span class="fl">123</span>, warmup <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>             save_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/brms/man/save_pars.html" class="external-link">save_pars</a></span><span class="op">(</span>all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in unserialize(socklist[[n]]): error reading from connection</span></span>
<span></span>
<span><span class="co"># within-person composition only model</span></span>
<span><span class="va">m2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/brmcoda.html">brmcoda</a></span><span class="op">(</span>compilr <span class="op">=</span> <span class="va">cilr</span>,</span>
<span>             formula <span class="op">=</span> <span class="va">STRESS</span> <span class="op">~</span> <span class="va">wilr1</span> <span class="op">+</span> <span class="va">wilr2</span> <span class="op">+</span> <span class="va">wilr3</span> <span class="op">+</span> <span class="va">wilr4</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">ID</span><span class="op">)</span>,</span>
<span>             iter <span class="op">=</span> <span class="fl">6000</span>, chains <span class="op">=</span> <span class="fl">8</span>, cores <span class="op">=</span> <span class="fl">8</span>, seed <span class="op">=</span> <span class="fl">123</span>, warmup <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>             save_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/brms/man/save_pars.html" class="external-link">save_pars</a></span><span class="op">(</span>all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in unserialize(socklist[[n]]): error reading from connection</span></span>
<span></span>
<span><span class="co"># full model</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/brmcoda.html">brmcoda</a></span><span class="op">(</span>compilr <span class="op">=</span> <span class="va">cilr</span>,</span>
<span>             formula <span class="op">=</span> <span class="va">STRESS</span> <span class="op">~</span> <span class="va">bilr1</span> <span class="op">+</span> <span class="va">bilr2</span> <span class="op">+</span> <span class="va">bilr3</span> <span class="op">+</span> <span class="va">bilr4</span> <span class="op">+</span></span>
<span>               <span class="va">wilr1</span> <span class="op">+</span> <span class="va">wilr2</span> <span class="op">+</span> <span class="va">wilr3</span> <span class="op">+</span> <span class="va">wilr4</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">ID</span><span class="op">)</span>,</span>
<span>             iter <span class="op">=</span> <span class="fl">6000</span>, chains <span class="op">=</span> <span class="fl">8</span>, cores <span class="op">=</span> <span class="fl">8</span>, seed <span class="op">=</span> <span class="fl">123</span>, warmup <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>             save_pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/brms/man/save_pars.html" class="external-link">save_pars</a></span><span class="op">(</span>all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in unserialize(socklist[[n]]): error reading from connection</span></span></code></pre></div>
<p>We can now compare these models with the
<code><a href="https://easystats.github.io/bayestestR/reference/bayesfactor_models.html" class="external-link">bayesfactor_models()</a></code> function, using the intercept-only
model as reference.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://easystats.github.io/bayestestR/reference/bayesfactor_models.html" class="external-link">bayesfactor_models</a></span><span class="op">(</span><span class="va">m</span><span class="op">$</span><span class="va">Model</span>, <span class="va">m1</span><span class="op">$</span><span class="va">Model</span>, <span class="va">m2</span><span class="op">$</span><span class="va">Model</span>, denominator <span class="op">=</span> <span class="va">m0</span><span class="op">$</span><span class="va">Model</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): object 'm1' not found</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparison</span></span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): object 'comparison' not found</span></span></code></pre></div>
<p>We can see that model with only within-person composition is the best
model - with <span class="math inline">\(BF\)</span> = 11.86 compared to
the null (intercept only).</p>
<p>Let’s compare these models against the full model.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">comparison</span>, reference <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in eval(expr, envir, enclos): object 'comparison' not found</span></span></code></pre></div>
<p>Again, our data favours the within-person composition only model over
the full model, giving 2.93 times more support.</p>
</div>
</div>
<div class="section level2">
<h2 id="substitution-model">Substitution model<a class="anchor" aria-label="anchor" href="#substitution-model"></a>
</h2>
<p>When examining the relationships between compositional data and an
outcome, we often are also interested in the changes in an outcomes when
a fixed duration of time is reallocated from one compositional component
to another, while the other components remain constant. These changes
can be examined using the compositional isotemporal substitution model.
In <code>multilevelcoda</code>, we extend this model to multilevel
approach to test both between-person and within-person changes. All
substitution models can be computed using the
<code><a href="../reference/substitution.html">substitution()</a></code> function, with the following arguments:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="89%">
</colgroup>
<thead><tr class="header">
<th>Argument</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>object</code></td>
<td>A fitted <code>brmcoda</code> object</td>
</tr>
<tr class="even">
<td><code>base</code></td>
<td>A <code>data.frame</code> or <code>data.table</code> of possible
substitution of variables.</td>
</tr>
<tr class="odd">
<td></td>
<td>This data set can be computed using function
<code>possub</code>
</td>
</tr>
<tr class="even">
<td><code>delta</code></td>
<td>A integer, numeric value or vector indicating the amount of change
in compositional parts for substitution</td>
</tr>
<tr class="odd">
<td><code>level</code></td>
<td>A character value or vector to specify whether the change in
composition should be at <code>between</code>-person and/or
<code>within</code>-person levels</td>
</tr>
<tr class="even">
<td><code>type</code></td>
<td>A character value or vector to specify whether the estimated change
in outcome should be <code>conditional</code> or
<code>marginal</code>
</td>
</tr>
<tr class="odd">
<td><code>regrid</code></td>
<td>Optional reference grid consisting of combinations of covariates
over which predictions are made. If not provided, the default reference
grid is used.</td>
</tr>
<tr class="even">
<td><code>summary</code></td>
<td>A logical value to indicate whether the prediction at each level of
the reference grid or an average of them should be returned.</td>
</tr>
<tr class="odd">
<td><code>...</code></td>
<td>Additional arguments to be passed to
<code>describe_posterior</code>
</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="between-person-substitution-model">Between-person substitution model<a class="anchor" aria-label="anchor" href="#between-person-substitution-model"></a>
</h3>
<p>The below example examines the changes in stress for different
pairwise substitution of sleep-wake behaviours for 5 minutes, at
between-person level.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bsubm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/substitution.html">substitution</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">m</span>, delta <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                      level <span class="op">=</span> <span class="st">"between"</span>, ref <span class="op">=</span> <span class="st">"grandmean"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: executing %dopar% sequentially: no parallel backend registered</span></span></code></pre></div>
<p>The output contains multiple data sets of results for all
compositional components. Here are the results for changes in stress
when sleep (TST) is substituted for 5 minutes, averaged across levels of
covariates.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">bsubm</span><span class="op">$</span><span class="va">BetweenSub</span><span class="op">$</span><span class="va">TST</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">Mean</th>
<th align="right">CI_low</th>
<th align="right">CI_high</th>
<th align="right">Delta</th>
<th align="left">From</th>
<th align="left">To</th>
<th align="left">Level</th>
<th align="left">Reference</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.031</td>
<td align="right">-0.002</td>
<td align="right">0.064</td>
<td align="right">5</td>
<td align="left">WAKE</td>
<td align="left">TST</td>
<td align="left">between</td>
<td align="left">grandmean</td>
</tr>
<tr class="even">
<td align="right">0.003</td>
<td align="right">-0.014</td>
<td align="right">0.019</td>
<td align="right">5</td>
<td align="left">MVPA</td>
<td align="left">TST</td>
<td align="left">between</td>
<td align="left">grandmean</td>
</tr>
<tr class="odd">
<td align="right">0.006</td>
<td align="right">-0.007</td>
<td align="right">0.018</td>
<td align="right">5</td>
<td align="left">LPA</td>
<td align="left">TST</td>
<td align="left">between</td>
<td align="left">grandmean</td>
</tr>
<tr class="even">
<td align="right">0.007</td>
<td align="right">-0.008</td>
<td align="right">0.021</td>
<td align="right">5</td>
<td align="left">SB</td>
<td align="left">TST</td>
<td align="left">between</td>
<td align="left">grandmean</td>
</tr>
<tr class="odd">
<td align="right">-0.029</td>
<td align="right">-0.060</td>
<td align="right">0.002</td>
<td align="right">-5</td>
<td align="left">WAKE</td>
<td align="left">TST</td>
<td align="left">between</td>
<td align="left">grandmean</td>
</tr>
<tr class="even">
<td align="right">-0.003</td>
<td align="right">-0.019</td>
<td align="right">0.014</td>
<td align="right">-5</td>
<td align="left">MVPA</td>
<td align="left">TST</td>
<td align="left">between</td>
<td align="left">grandmean</td>
</tr>
<tr class="odd">
<td align="right">-0.006</td>
<td align="right">-0.018</td>
<td align="right">0.007</td>
<td align="right">-5</td>
<td align="left">LPA</td>
<td align="left">TST</td>
<td align="left">between</td>
<td align="left">grandmean</td>
</tr>
<tr class="even">
<td align="right">-0.007</td>
<td align="right">-0.021</td>
<td align="right">0.008</td>
<td align="right">-5</td>
<td align="left">SB</td>
<td align="left">TST</td>
<td align="left">between</td>
<td align="left">grandmean</td>
</tr>
</tbody>
</table>
<p>None of the results are significant, given that the credible
intervals did not cross 0, showing that increasing sleep (TST) at the
expense of any other behaviours was not associated in changes in stress.
Notice there is no column indicating the levels of convariates,
indicating that these results have been averaged.</p>
</div>
<div class="section level3">
<h3 id="within-person-substitution-model">Within-person substitution model<a class="anchor" aria-label="anchor" href="#within-person-substitution-model"></a>
</h3>
<p>Let’s now take a look at how stress changes when different pairwise
of sleep-wake behaviours are substituted for 5 minutes, at within-person
level.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Within-person substitution</span></span>
<span><span class="va">wsubm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/substitution.html">substitution</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">m</span>, delta <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                      level <span class="op">=</span> <span class="st">"within"</span>, ref <span class="op">=</span> <span class="st">"grandmean"</span><span class="op">)</span></span></code></pre></div>
<p>Results for 5 minute substitution.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">wsubm</span><span class="op">$</span><span class="va">WithinSub</span><span class="op">$</span><span class="va">TST</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">Mean</th>
<th align="right">CI_low</th>
<th align="right">CI_high</th>
<th align="right">Delta</th>
<th align="left">From</th>
<th align="left">To</th>
<th align="left">Level</th>
<th align="left">Reference</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.017</td>
<td align="right">0.002</td>
<td align="right">0.032</td>
<td align="right">5</td>
<td align="left">WAKE</td>
<td align="left">TST</td>
<td align="left">within</td>
<td align="left">grandmean</td>
</tr>
<tr class="even">
<td align="right">-0.003</td>
<td align="right">-0.009</td>
<td align="right">0.003</td>
<td align="right">5</td>
<td align="left">MVPA</td>
<td align="left">TST</td>
<td align="left">within</td>
<td align="left">grandmean</td>
</tr>
<tr class="odd">
<td align="right">-0.005</td>
<td align="right">-0.009</td>
<td align="right">0.000</td>
<td align="right">5</td>
<td align="left">LPA</td>
<td align="left">TST</td>
<td align="left">within</td>
<td align="left">grandmean</td>
</tr>
<tr class="even">
<td align="right">-0.002</td>
<td align="right">-0.007</td>
<td align="right">0.003</td>
<td align="right">5</td>
<td align="left">SB</td>
<td align="left">TST</td>
<td align="left">within</td>
<td align="left">grandmean</td>
</tr>
<tr class="odd">
<td align="right">-0.016</td>
<td align="right">-0.030</td>
<td align="right">-0.002</td>
<td align="right">-5</td>
<td align="left">WAKE</td>
<td align="left">TST</td>
<td align="left">within</td>
<td align="left">grandmean</td>
</tr>
<tr class="even">
<td align="right">0.003</td>
<td align="right">-0.003</td>
<td align="right">0.009</td>
<td align="right">-5</td>
<td align="left">MVPA</td>
<td align="left">TST</td>
<td align="left">within</td>
<td align="left">grandmean</td>
</tr>
<tr class="odd">
<td align="right">0.005</td>
<td align="right">0.000</td>
<td align="right">0.009</td>
<td align="right">-5</td>
<td align="left">LPA</td>
<td align="left">TST</td>
<td align="left">within</td>
<td align="left">grandmean</td>
</tr>
<tr class="even">
<td align="right">0.002</td>
<td align="right">-0.003</td>
<td align="right">0.007</td>
<td align="right">-5</td>
<td align="left">SB</td>
<td align="left">TST</td>
<td align="left">within</td>
<td align="left">grandmean</td>
</tr>
</tbody>
</table>
<p>At within-person level, there were significant results for
substitution of sleep (TST) and time awake in bed (WAKE) for 5 minutes,
but not other behaviours. Increasing sleep at the expense of time spent
awake in bed predicted 0.02 higher stress [95% CI 0.00, 0.03], on a
given day. Conversely, less sleep and more time awake in bed predicted
less stress (b = -0.02 [95% CI -0.03, -0.00]).</p>
</div>
<div class="section level3">
<h3 id="more-interesting-substitution-models">More interesting substitution models<a class="anchor" aria-label="anchor" href="#more-interesting-substitution-models"></a>
</h3>
<p>You can learn more about different types of substitution models
at<br><a href="https://florale.github.io/multilevelcoda/articles/substitution-model.html">Compositional
Multilevel Substitution Models</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://github.com/florale" class="external-link">Flora Le</a>, Joshua F. Wiley.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
